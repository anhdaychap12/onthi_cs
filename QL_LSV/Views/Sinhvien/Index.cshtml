
@{
    ViewBag.Title = "Danh sách sinh viên";
    string str_page = Request["page"];

    if (string.IsNullOrEmpty(str_page))
    {
        str_page  = "1";
    }

    var totalRows = ViewData["count"];

    var totalPage = int.Parse(totalRows.ToString()) / 2;

    

}

<div class=" container">
    <input type="hidden" value="@str_page" id="page">
    <table id="tbl_data" class="table table-striped text-center">
        <tr>
            <td>    </td>
        </tr>
    </table>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center" id="paginate">
            @if (totalPage > 1)
            {
                if (int.Parse(str_page) > 1)
                {
                    <li class="page-item"><a class="page-link" href="/Sinhvien/Index?page=@(int.Parse(str_page)-1)"><i class="fa-solid fa-chevron-left"></i></a></li>
                }
                for (int i = 0; i < totalPage; i++)
                {
                    if ((i+1) == int.Parse(str_page))
                    {
                        <li class="page-item active"><a class="page-link " href="/Sinhvien/Index?page=@(i+1)">@(i+1)</a></li>
                    }
                    else
                    {
                        <li class="page-item"><a class="page-link" href="/Sinhvien/Index?page=@(i+1)">@(i+1)</a></li>
                    }
                }
                if (int.Parse(str_page) < totalPage)
                {
                    <li class="page-item"><a class="page-link" href="/Sinhvien/Index?page=@(int.Parse(str_page)+1)"><i class="fa-solid fa-chevron-right"></i></a></li>
                }
            }
        </ul>
    </nav>
</div>

    





<script>
    function getList() {
        var pageItem = $('#page').val();
        $.ajax({
            url: "/Sinhvien/GetList",
            method: "POST",
            data: {pageItem},
            success: function (result) {
                var obj = JSON.parse(result);
                console.log(obj.length);
                $('#tbl_data').html("\
                    <thead>\
                            <tr align='center'>\
                                <th>STT</th>\
                                <th>MSSV</th>\
                                <th>Name</th>\
                                <th>Address</th>\
                                <th>Gender</th>\
                                <th>Birthday</th>\
                                <th>Thao tác</th>\
                            </tr>\
                        </thead>\
                    <tbody id=\"tbl_data_printer\"></tbody>\
                    ");
                let htmlResult = "";

                for (let i = 0; i < obj.length; i++) {
                    htmlResult += "\
                                <tr>\
                                    <td>" + obj[i].id + "</td>\
                                    <td class ='MSSV'>" + obj[i].sv_mssv + "</td>\
                                    <td class='HoTen'>" + obj[i].sv_name + "</td>\
                                    <td>" + obj[i].sv_address + "</td>\
                                    <td>" + obj[i].sv_gender + "</td>\
                                    <td>" + obj[i].sv_birthday + "</td>\
                                    <td>\
                                    <a href=\"/Sinhvien/Edit?id="+ obj[i].id + "\"class=\"btn btn-primary mr-2\"><i class=\"fas fa-edit\"></i></a>\
                                    <button onclick=\"Delete(this)\" class=\"btn btn-danger\"><i class=\"fas fa-trash\"></i></button>\
                                    </td>\
                                    ";
                }
                $('#tbl_data_printer').append(htmlResult);
            }
        }
        )
    }

    $(function () {
        getList();
    })
</script>